{% extends 'grants/base.html' %}

{% block title %}Reports{% endblock %}
{% block style %}<link rel="stylesheet" type="text/css" href="/static/css/reporting.css">{% endblock %}
{% block script %}
  <!-- reporting javascript -->
<script type="text/javascript">

  var active_form = '#app-form';

  function check(name, checked){
    console.log(name + ' ' + checked);
    console.log($('input[name="' + name + '"]').prop('checked'));
    $('input[name="' + name + '"]').prop('checked', checked);
  }

  function toggleHelp(){
    help = document.getElementById('help');
    if (help.style.display == 'block'){
      help.style.display = 'none';
    } else {
      help.style.display = 'block';
    }
  }

  function typeSelected(){
    console.log('type selected');
    var new_val = $('#report_type_selector').val();
    if (new_val != active_form){
      console.log('hiding ' + active_form);
      $(active_form).hide();
      active_form = new_val;
      console.log('showing ' + active_form);
      $(active_form).show();
      console.log('active swapped');
    }
  }

  $(document).ready(function() {
    typeSelected(); // make sure form matches selection, in case of back button
  });

</script>
{% endblock %}

{% block body %}
<a class="back_link" href="/admin/grants/">Back to admin site</a>
<h1>Grants Database -- Reports</h1>

<div class="reporting-wrapper">

  <div class="report-type">
    <select id="report_type_selector" onchange="typeSelected();">
      <option value="#application-form">Applications</option>
      <option value="#organization-form">Organizations</option>
      <option value="#award-form">Awards</option>
    </select>
  </div>

  {% include 'grants/reporting_form.html' with report_type='award' form=award_form %}
  {% include 'grants/reporting_form.html' with report_type='application' form=app_form %}
  {% include 'grants/reporting_org_form.html' %}

</div><!-- ends report_form -->

<div id="help">
  <u>This form is for</u>
  <ul>
    <li>Exporting to spreadsheet</li>
    <li>Complex filtering</li>
    <li>Viewing specific fields</li>
  </ul>
  <u>Use the admin site for</u>
  <ul>
    <li>Reading applications</li>
    <li>Viewing organization info</li>
    <li>Simple filtering and sorting</li>
    <li>Editing or updating any fields</li>
  </ul>
</div>

{% endblock %}

