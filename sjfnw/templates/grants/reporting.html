{% extends 'grants/base.html' %}

{% block title %}Reports{% endblock %}
{% block style %}<link rel="stylesheet" type="text/css" href="/static/css/reporting.css">{% endblock %}
{% block script %}
  <!-- reporting javascript -->
	<script type="text/javascript">

  var active_form = '#app-form';

	function check(name, checked){
		console.log(name + ' ' + checked);
		$('input[name="'+name+'"]').attr('checked', checked);
	}

	function toggleHelp(){
		help = document.getElementById('help');
		if (help.style.display == 'block'){
			help.style.display = 'none';
		} else {
			help.style.display = 'block';
		}
	}

  function typeSelected(){
    console.log('type selected');
    var new_val = $('#report_type_selector').val();
    if (new_val != active_form){
      console.log('hiding ' + active_form);
      $(active_form).hide();
      active_form = new_val;
      console.log('showing ' + active_form);
      $(active_form).show();
      console.log('active swapped');
    }
  }

  $(document).ready(function() {
    typeSelected(); // make sure form matches selection, in case of back button
  });

	</script>
{% endblock %}

{% block body %}
<a class="back_link" href="/admin/grants/">Back to admin site</a>
<h1>Grants Database -- Reports</h1>

<div class="report_form">

  <div class="report_type">
    <select id="report_type_selector" onchange="typeSelected();">
      <option value="#app-form">Applications/giving project awards</option>
      <option value="#org-form">Organizations</option>
      <option value="#award-form">All awards</option>
    </select>
  </div>

  {% include 'grants/reporting_award_form.html' %}
  {% include 'grants/reporting_app_form.html' %}
  {% include 'grants/reporting_org_form.html' %}

</div><!-- ends report_form -->

<div id="help">
  <u>This form is for</u>
  <ul>
    <li>Grant applications only</li>
    <li>Exporting to spreadsheet</li>
    <li>Complex filtering</li>
    <li>Viewing specific fields</li>
  </ul>
  <u>Use the admin site for</u>
  <ul>
    <li>Reading applications</li>
    <li>Viewing organization info</li>
    <li>Simple filtering and sorting</li>
    <li>Changing screening status or any other attributes</li>
  </ul>
</div>

{% endblock %}

