<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Intro to testing - sjfnw</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
      <link href="../../_theme/overrides.css" rel="stylesheet">

    
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-28076150-3', 'auto');
        ga('send', 'pageview');
      </script>
    
  </head>

  <body>

    <div class="navbar navbar-default navbar-fixed-top text-center" role="navigation">
  <ul class="top-nav-ul">

    <li>
      
        <a class="emphasize" href="https://github.com/aisapatino/sjfnw/" target="_blank">
          <i class="fa fa-github"></i>
          sjfnw
        </a>
      
    </li>

    <li class="spacer-right"></li>

    
      
        <li >
          <a href="../..">Home</a>
        </li>
      
    
      
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting started <b class="caret"></b></a>
          <ul class="dropdown-menu">
          
            
<li >
    <a href="../../getting-started/installation-and-setup/">Installation and setup</a>
</li>

          
            
<li >
    <a href="../../getting-started/local-server/">Running a local server</a>
</li>

          
            
<li >
    <a href="../../getting-started/running-tests/">Running tests</a>
</li>

          
            
<li >
    <a href="../../getting-started/text-editor-setup/">Text editor setup</a>
</li>

          
            
<li >
    <a href="../../getting-started/linters/">Linters</a>
</li>

          
          </ul>
        </li>
      
    
      
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project info <b class="caret"></b></a>
          <ul class="dropdown-menu">
          
            
<li >
    <a href="../../about/models/">Overview of models</a>
</li>

          
            
<li >
    <a href="../../about/project-structure/">Project structure</a>
</li>

          
            
<li >
    <a href="../../about/code-conventions/">Code conventions</a>
</li>

          
            
<li >
    <a href="../../about/docs/">Documentation</a>
</li>

          
          </ul>
        </li>
      
    
      
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Workflow <b class="caret"></b></a>
          <ul class="dropdown-menu">
          
            
<li >
    <a href="../../workflow/git/">Git</a>
</li>

          
            
<li >
    <a href="../../workflow/issue-tracking/">Issue tracking</a>
</li>

          
            
<li >
    <a href="../../workflow/continuous-integration/">Continuous Integration</a>
</li>

          
            
<li >
    <a href="../../workflow/deploying/">Deploying</a>
</li>

          
          </ul>
        </li>
      
    
      
        <li class="dropdown active">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Testing <b class="caret"></b></a>
          <ul class="dropdown-menu">
          
            
<li class="active">
    <a href="./">Intro to testing</a>
</li>

          
            
<li >
    <a href="../test-classes/">Test classes</a>
</li>

          
            
<li >
    <a href="../writing-tests/">Writing tests</a>
</li>

          
          </ul>
        </li>
      
    
      
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">How to <b class="caret"></b></a>
          <ul class="dropdown-menu">
          
            
<li >
    <a href="../../how-to/debugging-performance/">Performance debugging</a>
</li>

          
            
<li >
    <a href="../../how-to/database/">Database management</a>
</li>

          
            
<li >
    <a href="../../how-to/support-requests/">Support requests</a>
</li>

          
          </ul>
        </li>
      
    
      
        <li >
          <a href="../../resources/">Resources</a>
        </li>
      
    

    <li class="spacer-left"></li>

    <li>
      <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
        <i class="fa fa-search"></i> Search
      </a>
    </li>

  </ul>
</div>

    <div class="container">
      
        <div class="col-md-3">
          
            <div class="bs-sidebar well affix" role="complementary">
  <div class="toc-header">Intro to testing</div>
    <ul class="nav">
    
        <li class="main active"><a href="#current-state-of-tests-in-sjfnw">Current state of tests in sjfnw</a></li>
        
    
        <li class="main "><a href="#django-and-python-testing">Django and Python testing</a></li>
        
    
        <li class="main "><a href="#test-files">Test files</a></li>
        
    
    </ul>
</div>
          
        </div>
        <div class="col-md-9 content" role="main">
          
              <h1>Intro to testing</h1>
            
          

<h3 id="current-state-of-tests-in-sjfnw">Current state of tests in sjfnw</h3>
<p>Most of the existing tests check the response returned by a view, and often also use queries to verify that expected objects were created/updated/deleted.. As we refactor some views into smaller pieces, we can write more unit tests.</p>
<p>One major issue with existing tests is that we don't have any way to test the actual in-browser behavior, including javascript functionality like loading and submitting forms or autosaving the grant application. There's an issue filed <a href="https://github.com/aisapatino/sjfnw/issues/172">here</a>.</p>
<p>At this point, the primary goal is to add <a href="../../workflow/continuous-integration/">test coverage</a> in whatever ways seem best. In particular, we should <strong>avoid adding any new functionality without accompanying tests</strong>.</p>
<h3 id="django-and-python-testing">Django and Python testing</h3>
<p>Django and Python provide a lot of tools/infrastructure for testing. To start:</p>
<ul>
<li>Tests use a sqlite3 database, which is in-memory and much faster than using mysql. (configured in <a href="https://github.com/aisapatino/sjfnw/blob/master/sjfnw/settings.py#L33"><code>settings.py</code></a>)</li>
<li>A test database is created at the start and destroyed after all tests have run. Between tests, the database is restored to its prior state, so one test's changes in the db should not affect another test.</li>
<li>If fixtures are specified, they will be loaded into the db before each test.</li>
</ul>
<p>All of our test classes inherit from <a href="https://docs.djangoproject.com/en/1.8/topics/testing/overview/#testcase"><code>django.test.TestCase</code></a>, which inherits from Python's <a href="https://docs.python.org/2/library/unittest.html#unittest.TestCase"><code>unittest.TestCase</code></a>. This provides all our test classes with</p>
<ul>
<li>Optional <code>setUp</code> and <code>tearDown</code> methods, which, if specified, will run before &amp; after each individual test. <code>setUp</code> is often useful, for example for logging the user in before each test.</li>
<li>Assertions are provided as methods on the test class. Python provides some <a href="https://docs.python.org/2/library/unittest.html#assert-methods">basic ones</a> and Django adds <a href="https://docs.djangoproject.com/en/1.8/topics/testing/overview/#assertions">additional ones</a></li>
<li>Django provides a <a href="https://docs.djangoproject.com/en/1.8/topics/testing/overview/#module-django.test.client">test client</a> that can make requests</li>
</ul>
<p>Note: We have sub-classed Django's <code>TestCase</code> as <code>BaseTestCase</code>, which is further specialized as <code>BaseFundTestCase</code> and <code>BaseGrantTestCase</code>. They provide a few convenient shortcuts for common tasks like creating a User and logging them in. See <a href="../test-classes/">docs for test classes</a></p>
<h3 id="test-files">Test files</h3>
<p>Tests are located in <code>sjfnw/fund/tests/</code> and <code>sjfnw/grants/tests/</code></p>
<ul>
<li>Split tests into separate files by subject/view</li>
<li>Files all start with <code>test_</code> (to be found by the test runner)</li>
</ul>
<p><code>sjfnw/tests.py</code> houses test-related classes and methods that are useful across both modules. For instance: custom test runner, base test classes, custom assertion methods, etc.</p>
        </div>
      

      <footer class="col-md-12 text-center">
        <p><a href="https://github.com/aisapatino/sjfnw/tree/master/docs/tests/intro-to-testing.md" target="_blank"><i class="fa fa-github"></i> View page source</a></p>
      </footer>
    </div>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog"
         aria-labelledby="Search Modal" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              <span aria-hidden="true">&times;</span>
              <span class="sr-only">Close</span>
            </button>
            <h4 class="modal-title" id="exampleModalLabel">Search</h4>
          </div>
          <div class="modal-body">
            <p>Search the documentation.</p>
            <form role="form">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
              </div>
            </form>
            <div id="mkdocs-search-results"></div>
          </div>
          <div class="modal-footer"></div>
        </div>
      </div>
    </div>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script>var base_url = '../..';</script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base-override.js"></script>
      <script src="../../_theme/base-override.js"></script>
      <script src="../../_theme/custom-highlight.js"></script>

  </body>
</html>
